<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Therapy Session Manager</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
</head>
<body>

  <div class="container">
    <aside id="client-pane">
      <header style="flex-direction: column; align-items: stretch; gap: 0.5rem;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <input type="text" id="client-search" placeholder="Search clients" />
          <a href="/reports" class="reports-link">ðŸ“Š Reports</a>
        </div>
        <button id="add-client">+ New Client</button>
      </header>

      <!-- ðŸ”½ Filter Dropdown -->
      <div style="margin-bottom: 0.5rem;">
        <label for="client-filter" style="font-size: 14px;">Show:</label>
        <select id="client-filter">
          <option value="active">Active</option>
          <option value="archived">Archived</option>
          <option value="all">All</option>
        </select>
      </div>

      <ul id="client-list"></ul>
      
      <!-- ðŸ”¢ Totals Summary -->
<div id="totals-summary" class="sticky-summary">
  <div><strong>Session Time:</strong> <span id="session-total">0h 0m</span></div>
  <div><strong>Supervision Time:</strong> <span id="supervision-total">0h 0m</span></div>
</div>

    </aside>

    <section id="note-list-pane">
      <header>
        <h2 id="client-name-header">Select a client</h2>
        <button id="add-note" disabled>+ New Note</button>
      </header>
      <ul id="note-list"></ul>
      
      <!-- Client-specific totals summary -->
      <div id="client-totals-summary" class="sticky-summary" style="display: none;">
        <div><strong>Client Session Time:</strong> <span id="client-session-total">0h 0m</span></div>
        <div><strong>Client Supervision Time:</strong> <span id="client-supervision-total">0h 0m</span></div>
      </div>
    </section>

    <section id="editor-pane">
      <header>
        <h3 id="note-title">Select a note</h3>
        <span id="save-status"></span>
      </header>
      <form id="note-form" hidden>
        <label>Date:
          <input type="date" id="note-date" name="note-date" />
        </label>
        <label>Duration (min):
          <input type="number" id="note-duration" name="note-duration" />
        </label>
        <div class="session-type-container">
          <label class="session-type-label">Session Type:</label>
          <div class="session-type-options">
            <label class="radio-label">
              <input type="radio" name="note-session-type" value="In-Person" checked>
              <span class="radio-text">In-Person</span>
            </label>
            <label class="radio-label">
              <input type="radio" name="note-session-type" value="Online">
              <span class="radio-text">Online</span>
            </label>
            <label class="radio-label">
              <input type="radio" name="note-session-type" value="Phone">
              <span class="radio-text">Phone</span>
            </label>
          </div>
        </div>
        <label>
          <input type="checkbox" id="note-paid" />
          Paid
        </label>
        <div id="editor-toolbar">
          <span class="ql-formats">
            <button class="ql-bold"></button>
            <button class="ql-italic"></button>
            <button class="ql-underline"></button>
          </span>
          <span class="ql-formats">
            <button class="ql-list" value="bullet"></button>
          </span>
        </div>
        <div id="editor"></div>
        <button type="submit" class="primary-button">Save</button>
      </form>
    </section>
  </div>

  <!-- ðŸ”· Client Edit Modal -->
  <div id="client-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Edit Client Info</h3>
      <form id="client-info-form">
        <!-- Personal Information Section -->
        <div class="form-section">
          <h4>Personal Information</h4>
          <div class="form-grid">
            <label>First Name: *
              <input type="text" id="modal-first-name" required />
            </label>
            <label>Last Name: *
              <input type="text" id="modal-last-name" required />
            </label>
            <label>Date of Birth: *
              <input type="date" id="modal-dob" required />
            </label>
            <label>Initial Assessment Date:
              <input type="date" id="modal-assessment-date" />
            </label>
          </div>
        </div>

        <!-- Contact Information Section -->
        <div class="form-section">
          <h4>Contact Information</h4>
          <div class="form-grid">
            <label>Email:
              <input type="email" id="modal-email" />
            </label>
            <label>Phone: *
              <input type="text" id="modal-phone" required />
            </label>
          </div>
        </div>

        <!-- Address Section -->
        <div class="form-section">
          <h4>Address</h4>
          <div class="form-grid">
            <label class="full-width">Address Line 1:
              <input type="text" id="modal-address1" />
            </label>
            <label class="full-width">Address Line 2:
              <input type="text" id="modal-address2" />
            </label>
            <label>City:
              <input type="text" id="modal-city" />
            </label>
            <label>Postcode:
              <input type="text" id="modal-postcode" />
            </label>
          </div>
        </div>

        <!-- Emergency Contact Section -->
        <div class="form-section">
          <h4>Emergency Contact</h4>
          <div class="form-grid">
            <label>Name:
              <input type="text" id="modal-emergency-name" />
            </label>
            <label>Relationship:
              <input type="text" id="modal-emergency-relationship" />
            </label>
            <label>Phone:
              <input type="text" id="modal-emergency-phone" />
            </label>
          </div>
        </div>

        <!-- GP Details Section -->
        <div class="form-section">
          <h4>GP Details</h4>
          <div class="form-grid">
            <label>GP Name:
              <input type="text" id="modal-gp-name" />
            </label>
            <label>Practice:
              <input type="text" id="modal-gp-practice" />
            </label>
            <label>Phone:
              <input type="text" id="modal-gp-phone" />
            </label>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="form-actions">
          <div class="action-buttons">
            <button type="button" id="toggle-archive-btn" class="secondary-button">Archive</button>
            <button type="button" id="delete-client-btn" class="secondary-button" style="color: red;">Delete</button>
          </div>
          <div class="modal-buttons">
            <button type="submit" class="primary-button">Save</button>
            <button type="button" id="modal-cancel" class="secondary-button">Cancel</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- ðŸŸ¨ New Note Type Modal -->
  <div id="note-type-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Select Note Type</h3>
      <div class="modal-buttons">
        <button class="primary-button" id="create-session-note">Session Note</button>
        <button class="primary-button" id="create-assessment-note">Assessment Note</button>
        <button class="primary-button" id="create-supervision-note">Supervision Note</button>
      </div>
      <div class="modal-buttons" style="margin-top: 1rem;">
        <button class="secondary-button" id="cancel-note-type">Cancel</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script src="/static/js/main.js"></script>
</body>
</html>
